\hypertarget{class_simulator}{}\section{Simulator Class Reference}
\label{class_simulator}\index{Simulator@{Simulator}}


\mbox{\hyperlink{class_simulator}{Simulator}} object. Sets up Allegro library, and runs the main simulation loop.  




{\ttfamily \#include $<$Simulator.\+h$>$}

Inheritance diagram for Simulator\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_simulator}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_simulator_ac76c0369824f7d70f0d6cb98859d0b1d}{Simulator}} (const \mbox{\hyperlink{class_display}{Display}} \&d, int fps)
\begin{DoxyCompactList}\small\item\em event storage \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_simulator_a0f49aa04f42060a785adf77346b9de9f}{$\sim$\+Simulator}} ()
\begin{DoxyCompactList}\small\item\em Destroy the \mbox{\hyperlink{class_simulator}{Simulator}} object, free all Allegro resources allocated by constructor. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_simulator_aa2de7e32b04cc3e8fc60aec23997621b}{run}} ()
\begin{DoxyCompactList}\small\item\em Invoke to begin the simulation. Main rendering loop. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{class_simulator_a78e300570318b9cd65f52b9547dee070}{update\+Model}} (double dt)=0
\begin{DoxyCompactList}\small\item\em Updates the state of the objects in the model. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{class_simulator_ad47f95a2a5201a46f760c14d63d84725}{draw\+Model}} ()=0
\begin{DoxyCompactList}\small\item\em Draws the model to the display. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
\mbox{\hyperlink{class_simulator}{Simulator}} object. Sets up Allegro library, and runs the main simulation loop. 



Definition at line 21 of file Simulator.\+h.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_simulator_ac76c0369824f7d70f0d6cb98859d0b1d}\label{class_simulator_ac76c0369824f7d70f0d6cb98859d0b1d}} 
\index{Simulator@{Simulator}!Simulator@{Simulator}}
\index{Simulator@{Simulator}!Simulator@{Simulator}}
\subsubsection{\texorpdfstring{Simulator()}{Simulator()}}
{\footnotesize\ttfamily Simulator\+::\+Simulator (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_display}{Display}} \&}]{d,  }\item[{int}]{fps }\end{DoxyParamCaption})}



event storage 

Construct a new \mbox{\hyperlink{class_simulator}{Simulator}} object, and initialize the Allegro library.


\begin{DoxyParams}{Parameters}
{\em d} & \mbox{\hyperlink{class_display}{Display}} object. \\
\hline
{\em fps} & Frames per second. \\
\hline
\end{DoxyParams}


Definition at line 18 of file Simulator.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{19     : framesPerSec(fps), timer(NULL), eventQueue(NULL) \{}
\DoxyCodeLine{20   \textcolor{keywordflow}{if} ((timer = al\_create\_timer(1.0 / fps)) == NULL)}
\DoxyCodeLine{21     \textcolor{keywordflow}{throw} std::runtime\_error(\textcolor{stringliteral}{"Cannot create allegro timer"});}
\DoxyCodeLine{22 }
\DoxyCodeLine{23   \textcolor{keywordflow}{if} ((eventQueue = al\_create\_event\_queue()) == NULL)}
\DoxyCodeLine{24     \textcolor{keywordflow}{throw} std::runtime\_error(\textcolor{stringliteral}{"Cannot create event queue"});}
\DoxyCodeLine{25 }
\DoxyCodeLine{26   al\_register\_event\_source(eventQueue,}
\DoxyCodeLine{27                            al\_get\_display\_event\_source(d.\mbox{\hyperlink{class_display_a800ce141e803ab23b029a6638860ab51}{getAllegroDisplay}}()));}
\DoxyCodeLine{28 }
\DoxyCodeLine{29   al\_register\_event\_source(eventQueue, al\_get\_timer\_event\_source(timer));}
\DoxyCodeLine{30 }
\DoxyCodeLine{31   al\_start\_timer(timer);}
\DoxyCodeLine{32 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_simulator_a0f49aa04f42060a785adf77346b9de9f}\label{class_simulator_a0f49aa04f42060a785adf77346b9de9f}} 
\index{Simulator@{Simulator}!````~Simulator@{$\sim$Simulator}}
\index{````~Simulator@{$\sim$Simulator}!Simulator@{Simulator}}
\subsubsection{\texorpdfstring{$\sim$Simulator()}{~Simulator()}}
{\footnotesize\ttfamily Simulator\+::$\sim$\+Simulator (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Destroy the \mbox{\hyperlink{class_simulator}{Simulator}} object, free all Allegro resources allocated by constructor. 

Destroy the \mbox{\hyperlink{class_simulator}{Simulator}}\+:\+: \mbox{\hyperlink{class_simulator}{Simulator}} object, and clean up resources for timer and event\+Queue.

Definition at line 39 of file Simulator.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{39                       \{}
\DoxyCodeLine{40   \textcolor{keywordflow}{if} (timer != NULL) al\_destroy\_timer(timer);}
\DoxyCodeLine{41   \textcolor{keywordflow}{if} (eventQueue != NULL) al\_destroy\_event\_queue(eventQueue);}
\DoxyCodeLine{42 \}}

\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{class_simulator_ad47f95a2a5201a46f760c14d63d84725}\label{class_simulator_ad47f95a2a5201a46f760c14d63d84725}} 
\index{Simulator@{Simulator}!drawModel@{drawModel}}
\index{drawModel@{drawModel}!Simulator@{Simulator}}
\subsubsection{\texorpdfstring{drawModel()}{drawModel()}}
{\footnotesize\ttfamily virtual void Simulator\+::draw\+Model (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}



Draws the model to the display. 



Implemented in \mbox{\hyperlink{classmy_simulator_a6750776d452448e55ab0bfa130e67437}{my\+Simulator}}.

\mbox{\Hypertarget{class_simulator_aa2de7e32b04cc3e8fc60aec23997621b}\label{class_simulator_aa2de7e32b04cc3e8fc60aec23997621b}} 
\index{Simulator@{Simulator}!run@{run}}
\index{run@{run}!Simulator@{Simulator}}
\subsubsection{\texorpdfstring{run()}{run()}}
{\footnotesize\ttfamily void Simulator\+::run (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Invoke to begin the simulation. Main rendering loop. 

Run the simulator.

Definition at line 47 of file Simulator.\+cc.


\begin{DoxyCode}{0}
\DoxyCodeLine{47                     \{}
\DoxyCodeLine{48   \textcolor{comment}{// switch to trigger model drawing}}
\DoxyCodeLine{49   \textcolor{keywordtype}{bool} redraw = \textcolor{keyword}{true};}
\DoxyCodeLine{50   \textcolor{comment}{// current time and previous time in seconds; needed so we can try}}
\DoxyCodeLine{51   \textcolor{comment}{// to keep track of the passing of real time.}}
\DoxyCodeLine{52   \textcolor{keywordtype}{double} currentTime, previousTime = 0;}
\DoxyCodeLine{53 }
\DoxyCodeLine{54   \textcolor{keywordflow}{while} (1) \{}
\DoxyCodeLine{55     ALLEGRO\_EVENT ev;}
\DoxyCodeLine{56     al\_wait\_for\_event(eventQueue, \&ev);}
\DoxyCodeLine{57 }
\DoxyCodeLine{58     \textcolor{keywordflow}{if} (ev.type == ALLEGRO\_EVENT\_TIMER) \{}
\DoxyCodeLine{59       currentTime = al\_current\_time();}
\DoxyCodeLine{60       \mbox{\hyperlink{class_simulator_a78e300570318b9cd65f52b9547dee070}{updateModel}}(currentTime - previousTime);}
\DoxyCodeLine{61       previousTime = currentTime;}
\DoxyCodeLine{62       \textcolor{comment}{// instead of simply calling drawModel() here, we set this flag so that}}
\DoxyCodeLine{63       \textcolor{comment}{// we redraw only if the event queue is empty; reason: draw is}}
\DoxyCodeLine{64       \textcolor{comment}{// expensive and we don't want to delay everything too much}}
\DoxyCodeLine{65       redraw = \textcolor{keyword}{true};}
\DoxyCodeLine{66     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ev.type == ALLEGRO\_EVENT\_DISPLAY\_CLOSE) \{}
\DoxyCodeLine{67       \textcolor{keywordflow}{break};}
\DoxyCodeLine{68     \}}
\DoxyCodeLine{69 }
\DoxyCodeLine{70     \textcolor{keywordflow}{if} (redraw \&\& al\_is\_event\_queue\_empty(eventQueue)) \{}
\DoxyCodeLine{71       \mbox{\hyperlink{class_simulator_ad47f95a2a5201a46f760c14d63d84725}{drawModel}}();}
\DoxyCodeLine{72       redraw = \textcolor{keyword}{false};}
\DoxyCodeLine{73     \}}
\DoxyCodeLine{74   \}}
\DoxyCodeLine{75 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_simulator_a78e300570318b9cd65f52b9547dee070}\label{class_simulator_a78e300570318b9cd65f52b9547dee070}} 
\index{Simulator@{Simulator}!updateModel@{updateModel}}
\index{updateModel@{updateModel}!Simulator@{Simulator}}
\subsubsection{\texorpdfstring{updateModel()}{updateModel()}}
{\footnotesize\ttfamily virtual void Simulator\+::update\+Model (\begin{DoxyParamCaption}\item[{double}]{dt }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [pure virtual]}}



Updates the state of the objects in the model. 


\begin{DoxyParams}{Parameters}
{\em dt} & Change in time, in seconds, since last update. \\
\hline
\end{DoxyParams}


Implemented in \mbox{\hyperlink{classmy_simulator_a76beefaa645d7785578a59b9f9d41dc9}{my\+Simulator}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/\mbox{\hyperlink{_simulator_8h}{Simulator.\+h}}\item 
src/\mbox{\hyperlink{_simulator_8cc}{Simulator.\+cc}}\end{DoxyCompactItemize}
